# 更新規則

変化が十分に持続的で、将来のセッションに役立つ場合にだけ OmniContext を更新してください。

## 通常は更新する

- 有意な実装進捗が出た後の `handoff.md`
- 未完了作業が変わったときの `todo.md`
- 自明でない技術的判断が行われたときの `decisions.md`
- プロジェクト構造や入口点が変わったときの `overview.md`
- Git を使っている場合は、「1 機能 1 コミット」を既定で有効にし、1 つの機能または一貫した変更が完了した時点で最小単位のコミットを行う
- Git を使っている場合でも、既定ではローカルコミットのみで、自動 push はしない。毎回 push するのはユーザーが明示した場合、または設定で有効化した場合だけにする

## 通常は更新しない

- 一時的なデバッグ出力
- 生のコマンドログ
- 秘密情報、認証情報、Token
- コードを見るだけで分かる事実で、探索コストを大して減らさないもの

## 書き方の標準

- 短く事実ベースの記述を優先する
- 何が変わったか、なぜ重要かを記録する
- 必要なら正確なファイル名やコマンド名を使う
- すぐ古くなる物語調の長文は避ける

## Git コミット基準

- 既定で有効。プロジェクトまたはローカル設定で明示的に無効化した場合のみ外す
- 1 つの機能が完了したら 1 回コミットし、大きな寄せ集めにしない
- 1 つのコミットは 1 つの明確なテーマに集中させる
- コミットメッセージは機能またはルール変更を説明できるものにする
- 無関係な整形、ついでのリファクタ、デバッグ用ファイルを同じコミットに混ぜない
- こうしておくと、問題発生時のロールバックと回帰追跡がずっと簡単になる

## Git Push 基準

- 既定ではローカルコミットのみで、自動 push はしない
- 自動 push は、ユーザーが「毎回 push する」と明示した場合、または設定で `auto_push_after_commit = true` を有効にした場合だけ許可する
- 明示がない限り、push は別アクションとして扱う

## Handoff の標準

各 `handoff.md` では次の問いに答えやすくすること:

- 今、何が真実か
- 最近何をしたか
- 次に何をすべきか
- 何がブロックまたはリスクか
