# ローカライズ規則

OmniContext は 1 つの共有プロトコルで多言語出力をサポートすべきです。

## 対応言語

- `zh-CN`
- `en`
- `ja`

## 言語決定順序

作業言語は次の順で決定します。

1. 現在のタスクにおける明示的なユーザー要求
2. `.omnicontext/shared/` にあるプロジェクトまたはワークスペースの言語方針
3. `.omnicontext/user.local.toml` にあるローカルユーザー既定値
4. `zh-CN` にフォールバック

## 影響範囲

言語が影響するもの:

- 生成される handoff テキスト
- wiki と文書テンプレート
- 特定言語を求められたときのツール向け要約
- 生成されるプロンプト、クイックスタート断片、オペレーター向け文言

言語が変わっても変えてはいけないもの:

- 設定キー
- フォルダ名
- プロトコル構造

言語が変わっても、ファイル構造と設定構造は安定させてください。

## 推奨方針

フォルダ構造は 1 つに固定し、内容言語だけを文脈に応じて変えます。

例:

- 中国向け社内プロジェクト: `zh-CN`
- グローバルユーザー向け外部文書: `en`
- 日本向け納品や協業: `ja`

## 共有方針とローカル好み

ワークスペースまたはプロジェクトの言語期待値は共有方針ファイルで管理します。
プロジェクト側により強い条件がない場合だけ、`user.local.toml` を個人既定値として使います。

## 言語方針の記録場所

言語期待値は次に記録します。

- `.omnicontext/shared/language-policy.md`：ワークスペース全体の既定方針
- プロジェクト `overview.md`：そのプロジェクトだけ既定と異なる場合

## 翻訳原則

業務上本当に独立したローカライズ内容が必要でない限り、3 本の独立知識ツリーを維持しないでください。1 つの共有構造を保ち、言語対応生成を優先します。

## 言語別プロンプトテンプレート

ワークフローは同じまま、オペレーター向けのプロンプト表現だけを言語ごとに調整します。

- `zh-CN`
  - ワークスペースの状態、次の行動、更新対象文書を優先して示す、簡潔で直接的な中国語プロンプトを使う
- `en`
  - ワークスペース対象、実行アクション、期待される書き戻しを明示する簡潔な英語プロンプトを使う
- `ja`
  - 対象ワークスペース、実行アクション、更新すべき文書を明示した簡潔な日本語プロンプトを使う
